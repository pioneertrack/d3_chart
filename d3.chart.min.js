/*! d3.chart - v0.0.1
 *  License: MIT Expat
 *  Date: 2013-04-16
 */
(function(t){"use strict";var n=t.d3,r={noBase:Error("d3.layer must be initialized with a base"),noDataBind:Error("d3.layer must specify a `dataBind` method."),noInsert:Error("d3.layer must specify an `insert` method.")},e=function(t){if(!t)throw r.noBase;this.base=t,this._handlers={}};e.prototype.dataBind=function(){throw r.noDataBind},e.prototype.insert=function(){throw r.noInsert},e.prototype.on=function(t,n){t in this._handlers||(this._handlers[t]=[]),this._handlers[t].push(n)},e.prototype.off=function(t,n){var r,e,i=this._handlers[t];if(i){if(1===arguments.length)return i.length=0,undefined;for(r=0,e=i.length;e>r;++r)i[r]===n&&i.splice(r,1)}},e.prototype.draw=function(t){var n,r,e,i,s,o,a;n=this.dataBind.call(this.base,t),r={enter:this.insert.call(n.enter()),update:n,exit:n.exit()};for(s in r){if(e=r[s],i=this._handlers[s])for(o=0,a=i.length;a>o;++o)e.call(i[o]);if(i=this._handlers[s+":transition"],i&&i.length)for(e=e.transition(),o=0,a=i.length;a>o;++o)e.call(i[o])}},n.selection.prototype.layer=function(t){var n,r=new e(this);if(r.dataBind=t.dataBind,r.insert=t.insert,"events"in t)for(n in t.events)r.on(n,t.events[n]);return this.on=function(){return r.on.apply(r,arguments)},this.off=function(){return r.off.apply(r,arguments)},this.draw=function(){return r.draw.apply(r,arguments)},this}})(this),function(t){"use strict";function n(t){var n,r,e,i;if(!t)return t;for(r=arguments.length,n=1;r>n;n++)if(e=arguments[n])for(i in e)t[i]=e[i];return t}var r=t.d3,e=function(t){this.constructor=t},i=function(t,n){var r;return e.prototype=t.prototype,r=new e(t),t.apply(r,n),r},s=function(t,n){var r=this.constructor.__super__;r&&s.call(r,t,n),Object.hasOwnProperty.call(this.constructor.prototype,"initialize")&&this.initialize.apply(t,n)},o=function(t){this.base=t,this._layers={},this._mixins=[],this._events={},s.call(this,this,Array.prototype.slice.call(arguments,1))};o.prototype.unlayer=function(t){var n=this.layer(t),r=this._layerList.indexOf(n);return delete this._layers[t],this._layerList.splice(r,1),this},o.prototype.layer=function(t,n,r){var e;return 1===arguments.length?this._layers[t]:(e=n.layer(r),this._layers[t]=e,n._chart=this,e)},o.prototype.initialize=function(){},o.prototype.transform=function(t){return t},o.prototype.mixin=function(t,n){var r=Array.prototype.slice.call(arguments,2);r.unshift(t);var e=o[n],s=i(e,r);return this._mixins.push(s),s},o.prototype.draw=function(t){var n,r;t=this.transform(t);for(n in this._layers)this._layers[n].draw(t);for(r in this._mixins)this._mixins[r].draw(t)},o.prototype.on=function(t,n,r){var e=this._events[t]||(this._events[t]=[]);return e.push({callback:n,context:r||this,_chart:this}),this},o.prototype.once=function(t,n,r){var e=this,i=function(){e.off(t,i),n.apply(this,arguments)};return this.on(t,i,r)},o.prototype.off=function(t,n,r){if(0===arguments.length)return this._events={},this;if(1===arguments.length)return this._events[t]=[],this;var e,i,s,o,a,h,u=[];for(e=t?[t]:Object.keys(this._events),a=0;e.length>a;a++){for(i=e[a],s=this._events[i],u=[],h=0;s.length>h;h++)o=s[h],(n&&n!==o.callback||r&&r!=o.context)&&u.push(o);this._events[i]=u}return this},o.prototype.trigger=function(t){var n,r,e=Array.prototype.slice.call(arguments,1),i=this._events[t];for(n=0;i.length>n;n++)r=i[n],r.callback.apply(r.context,e);return this},o.extend=function(t,r,e){var i,s=this;i=r&&Object.hasOwnProperty.call(r,"constructor")?r.constructor:function(){return s.apply(this,arguments)},n(i,s,e);var a=function(){this.constructor=i};return a.prototype=s.prototype,i.prototype=new a,r&&n(i.prototype,r),i.__super__=s.prototype,o[t]=i,i},r.chart=function(t){return 0===arguments.length?o:1===arguments.length?o[t]:o.extend.apply(o,arguments)},r.selection.prototype.chart=function(t){if(0===arguments.length)return this._chart;var n=Array.prototype.slice.call(arguments,1);n.unshift(this);var r=o[t];return i(r,n)}}(this);